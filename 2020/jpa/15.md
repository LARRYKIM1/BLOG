---
description: 김영한 저 "자바 ORM 표준 JPA 프로그래밍"을 읽고 정리한 내용입니다.
---

# \#15 고급주제와 성능최적화

## 주제

* 예외 처리 
* 엔티티 비교 주의점과 해결 방법 
* 프록시 심화 주제 
* 성능 최적화
  * N+1 문제
  * 읽기 전용 쿼리의 성능: 최적화 엔티티를 단순히 조회만 하면 영속성 컨텍스트에 스냅샷을 유지할 필요도 없고 영속성 컨텍스트를 플러시할 필요도 없다. 엔티티를 읽기 전용으로 쿼리할 때 성능 최적화 방안을 다룬다.
  * 배치 처리
  * SQL 쿼리 힌트 사용: 하이버네이트를 주로 다룬다.
  * 트랜잭션을 지원하는 쓰기 지연과 성능 최적화: 트랜잭션을 지원하는 쓰기 지연을 통해 성능을 최적화하는 방법을 다룬다. 

## 1. 예외 처리 

### 1.1 JPA 표준예외 정리 

* **`JPA 모든 예외`** &lt; **`PersistenceException`** &lt; **`RuntimeException`**  즉, JPA 예외는 모두 **언체크** 예외이다. 
* JPA 표준 예외는 크게 2가지로 나눌 수 있다.
  * 트랜잭션 롤백을 표시하는 예외
  * 트랜잭션 롤백을 표시하지 않는 예외
    * 심각한 예외가 아니다. 개발자가 판단해서 트랜잭션 커밋, 롤백 한다



#### 트랜잭션 롤백을 표시하는 예외

심각한 예외이므로 복구해선 안 된다. 강제로 커밋해도 트랜잭션이 커밋되지 않고 대신에 RollbackException 예외가 발생한다.

#### 트랜잭션 롤백을 표시하지 않는 예외

심각한 예외가 아니다. 개발자가 판단해서 트랜잭션 커밋, 롤백한다



### 1.2 스프링 프레임워크의 JPA 예외 변환















### 1.3























